const c={d:{},u:null,init(){this.u=this.g();this.i();this.m();this.k();this.p();},g(){let u=localStorage.getItem('_u');if(!u){u=Date.now().toString(36)+Math.random().toString(36).substr(2);localStorage.setItem('_u',u);}return u;},i(){const o=new IntersectionObserver((e)=>{e.forEach(i=>{if(i.isIntersecting){this.d.v=this.d.v||{};this.d.v[i.target.id||'u']=Date.now();}});},{threshold:[0.25,0.5,0.75,1]});document.querySelectorAll('[data-t]').forEach(e=>o.observe(e));},m(){let s=0,t=0;window.addEventListener('mousemove',e=>{s++;if(s%10===0)this.d.m={x:e.clientX,y:e.clientY,t:Date.now()};});window.addEventListener('click',e=>{t++;this.d.c={x:e.clientX,y:e.clientY,n:t,el:e.target.tagName};});},k(){document.addEventListener('keydown',e=>{this.d.k=(this.d.k||0)+1;if(e.key==='Enter')this.d.ke=(this.d.ke||0)+1;});},p(){let s=0;window.addEventListener('scroll',()=>{clearTimeout(s);s=setTimeout(()=>{this.d.s={y:window.scrollY,p:(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight))*100,t:Date.now()};},100);});setInterval(()=>{this.f();},5000);window.addEventListener('beforeunload',()=>{this.f();});},f(){const d={...this.d,u:this.u,ts:Date.now(),url:window.location.href,ttl:performance.now(),mem:performance.memory?performance.memory.usedJSHeapSize:0};fetch('/api/m',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d),keepalive:true});this.d={};}};export default c;